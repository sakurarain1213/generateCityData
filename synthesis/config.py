"""
配置文件：定义所有维度和城市列表
"""

# 维度定义
DIMENSIONS = {
    'D1': {
        'name': '性别',
        'values': ['M', 'F'],  # 男、女
        'labels': ['男', '女']
    },
    'D2': {
        'name': '生命周期',
        'values': ['16-24', '25-34', '35-49', '50-60', '60+'],
        'labels': ['试错期', '成家期', '稳固期', '回流期', '养老期']
    },
    'D3': {
        'name': '学历',
        'values': ['EduLo', 'EduMid', 'EduHi'],  # 初中及以下、高中或专科、本科及以上
        'labels': ['初中及以下', '高中或专科', '本科及以上']
    },
    'D4': {
        'name': '行业赛道',
        'values': ['Mfg', 'Service', 'Wht'],  # 蓝领制造、传统服务、现代专业服务
        'labels': ['蓝领制造', '传统服务', '现代专业服务']
    },
    'D5': {
        'name': '相对收入',
        'values': ['IncL', 'IncML', 'IncM', 'IncMH', 'IncH'],  # Q1-Q5分位
        'labels': ['Q1', 'Q2', 'Q3', 'Q4', 'Q5']
    },
    'D6': {
        'name': '家庭状态',
        'values': ['Split', 'Unit'],  # 分离、团聚
        'labels': ['分离', '团聚']
    },
    # 【!!! 出生地这个所谓方言区暂时不要】
}
# 中国主要城市列表（包含城市代码和名称）
# 这里使用中国地级市及以上城市，约300+个
CITIES = [
    ('1100', '北京'), ('1200', '天津'), ('1301', '石家庄'), ('1302', '唐山'), ('1303', '秦皇岛'),
    ('1304', '邯郸'), ('1305', '邢台'), ('1306', '保定'), ('1307', '张家口'), ('1308', '承德'),
    ('1309', '沧州'), ('1310', '廊坊'), ('1311', '衡水'), ('1401', '太原'), ('1402', '大同'),
    ('1403', '阳泉'), ('1404', '长治'), ('1405', '晋城'), ('1406', '朔州'), ('1407', '晋中'),
    ('1408', '运城'), ('1409', '忻州'), ('1410', '临汾'), ('1411', '吕梁'), ('1501', '呼和浩特'),
    ('1502', '包头'), ('1503', '乌海'), ('1504', '赤峰'), ('1505', '通辽'), ('1506', '鄂尔多斯'),
    ('1507', '呼伦贝尔'), ('1508', '巴彦淖尔'), ('1509', '乌兰察布'), ('2101', '沈阳'), ('2102', '大连'),
    ('2103', '鞍山'), ('2104', '抚顺'), ('2105', '本溪'), ('2106', '丹东'), ('2107', '锦州'),
    ('2108', '营口'), ('2109', '阜新'), ('2110', '辽阳'), ('2111', '盘锦'), ('2112', '铁岭'),
    ('2113', '朝阳'), ('2114', '葫芦岛'), ('2201', '长春'), ('2202', '吉林'), ('2203', '四平'),
    ('2204', '辽源'), ('2205', '通化'), ('2206', '白山'), ('2207', '松原'), ('2208', '白城'),
    ('2301', '哈尔滨'), ('2302', '齐齐哈尔'), ('2303', '鸡西'), ('2304', '鹤岗'), ('2305', '双鸭山'),
    ('2306', '大庆'), ('2307', '伊春'), ('2308', '佳木斯'), ('2309', '七台河'), ('2310', '牡丹江'),
    ('2311', '黑河'), ('2312', '绥化'), ('3100', '上海'), ('3201', '南京'), ('3202', '无锡'),
    ('3203', '徐州'), ('3204', '常州'), ('3205', '苏州'), ('3206', '南通'), ('3207', '连云港'),
    ('3208', '淮安'), ('3209', '盐城'), ('3210', '扬州'), ('3211', '镇江'), ('3212', '泰州'),
    ('3213', '宿迁'), ('3301', '杭州'), ('3302', '宁波'), ('3303', '温州'), ('3304', '嘉兴'),
    ('3305', '湖州'), ('3306', '绍兴'), ('3307', '金华'), ('3308', '衢州'), ('3309', '舟山'),
    ('3310', '台州'), ('3311', '丽水'), ('3401', '合肥'), ('3402', '芜湖'), ('3403', '蚌埠'),
    ('3404', '淮南'), ('3405', '马鞍山'), ('3406', '淮北'), ('3407', '铜陵'), ('3408', '安庆'),
    ('3410', '黄山'), ('3411', '滁州'), ('3412', '阜阳'), ('3413', '宿州'), ('3415', '六安'),
    ('3416', '亳州'), ('3417', '池州'), ('3418', '宣城'), ('3501', '福州'), ('3502', '厦门'),
    ('3503', '莆田'), ('3504', '三明'), ('3505', '泉州'), ('3506', '漳州'), ('3507', '南平'),
    ('3508', '龙岩'), ('3509', '宁德'), ('3601', '南昌'), ('3602', '景德镇'), ('3603', '萍乡'),
    ('3604', '九江'), ('3605', '新余'), ('3606', '鹰潭'), ('3607', '赣州'), ('3608', '吉安'),
    ('3609', '宜春'), ('3610', '抚州'), ('3611', '上饶'), ('3701', '济南'), ('3702', '青岛'),
    ('3703', '淄博'), ('3704', '枣庄'), ('3705', '东营'), ('3706', '烟台'), ('3707', '潍坊'),
    ('3708', '济宁'), ('3709', '泰安'), ('3710', '威海'), ('3711', '日照'), ('3712', '临沂'),
    ('3713', '德州'), ('3714', '聊城'), ('3715', '滨州'), ('3716', '菏泽'), ('4101', '郑州'),
    ('4102', '开封'), ('4103', '洛阳'), ('4104', '平顶山'), ('4105', '安阳'), ('4106', '鹤壁'),
    ('4107', '新乡'), ('4108', '焦作'), ('4109', '濮阳'), ('4110', '许昌'), ('4111', '漯河'),
    ('4112', '三门峡'), ('4113', '南阳'), ('4114', '商丘'), ('4115', '信阳'), ('4116', '周口'),
    ('4117', '驻马店'), ('4201', '武汉'), ('4202', '黄石'), ('4203', '十堰'), ('4205', '宜昌'),
    ('4206', '襄阳'), ('4207', '鄂州'), ('4208', '荆门'), ('4209', '孝感'), ('4210', '荆州'),
    ('4211', '黄冈'), ('4212', '咸宁'), ('4213', '随州'), ('4301', '长沙'), ('4302', '株洲'),
    ('4303', '湘潭'), ('4304', '衡阳'), ('4305', '邵阳'), ('4306', '岳阳'), ('4307', '常德'),
    ('4308', '张家界'), ('4309', '益阳'), ('4310', '郴州'), ('4311', '永州'), ('4312', '怀化'),
    ('4313', '娄底'), ('4401', '广州'), ('4402', '韶关'), ('4403', '深圳'), ('4404', '珠海'),
    ('4405', '汕头'), ('4406', '佛山'), ('4407', '江门'), ('4408', '湛江'), ('4409', '茂名'),
    ('4412', '肇庆'), ('4413', '惠州'), ('4414', '梅州'), ('4415', '汕尾'), ('4416', '河源'),
    ('4417', '阳江'), ('4418', '清远'), ('4419', '东莞'), ('4420', '中山'), ('4451', '潮州'),
    ('4452', '揭阳'), ('4453', '云浮'), ('4501', '南宁'), ('4502', '柳州'), ('4503', '桂林'),
    ('4504', '梧州'), ('4505', '北海'), ('4506', '防城港'), ('4507', '钦州'), ('4508', '贵港'),
    ('4509', '玉林'), ('4510', '百色'), ('4511', '贺州'), ('4512', '河池'), ('4513', '来宾'),
    ('4514', '崇左'), ('4601', '海口'), ('4602', '三亚'), ('4603', '三沙'), ('4604', '儋州'),
    ('5000', '重庆'), ('5101', '成都'), ('5103', '自贡'), ('5104', '攀枝花'), ('5105', '泸州'),
    ('5106', '德阳'), ('5107', '绵阳'), ('5108', '广元'), ('5109', '遂宁'), ('5110', '内江'),
    ('5111', '乐山'), ('5113', '南充'), ('5114', '眉山'), ('5115', '宜宾'), ('5116', '广安'),
    ('5117', '达州'), ('5118', '雅安'), ('5119', '巴中'), ('5120', '资阳'), ('5201', '贵阳'),
    ('5202', '六盘水'), ('5203', '遵义'), ('5204', '安顺'), ('5205', '毕节'), ('5206', '铜仁'),
    ('5301', '昆明'), ('5303', '曲靖'), ('5304', '玉溪'), ('5305', '保山'), ('5306', '昭通'),
    ('5307', '丽江'), ('5308', '普洱'), ('5309', '临沧'), ('5401', '拉萨'), ('5402', '日喀则'),
    ('5403', '昌都'), ('5404', '林芝'), ('5405', '山南'), ('5406', '那曲'), ('6101', '西安'),
    ('6102', '铜川'), ('6103', '宝鸡'), ('6104', '咸阳'), ('6105', '渭南'), ('6106', '延安'),
    ('6107', '汉中'), ('6108', '榆林'), ('6109', '安康'), ('6110', '商洛'), ('6201', '兰州'),
    ('6202', '嘉峪关'), ('6203', '金昌'), ('6204', '白银'), ('6205', '天水'), ('6206', '武威'),
    ('6207', '张掖'), ('6208', '平凉'), ('6209', '酒泉'), ('6210', '庆阳'), ('6211', '定西'),
    ('6212', '陇南'), ('6301', '西宁'), ('6302', '海东'), ('6401', '银川'), ('6402', '石嘴山'),
    ('6403', '吴忠'), ('6404', '固原'), ('6405', '中卫'), ('6501', '乌鲁木齐'), ('6502', '克拉玛依'),
    ('6504', '吐鲁番'), ('6505', '哈密'), ('6523', '昌吉'), ('6527', '博州'), ('6528', '巴州'),
    ('6529', '阿克苏'), ('6530', '克州'), ('6531', '喀什'), ('6532', '和田'), ('6540', '伊犁'),
    ('6542', '塔城'), ('6543', '阿勒泰'), ('6544', '石河子'), ('6545', '阿拉尔'), ('6546', '图木舒克'),
    ('6547', '五家渠'), ('6548', '北屯'), ('6549', '铁门关'), ('6590', '可克达拉'), ('6591', '双河'),
    ('6592', '昆玉'), ('6593', '胡杨河'), ('6594', '新星'), ('6595', '白杨'), ('6596', '铁力'),
    ('6597', '双丰'), ('6598', '可托海'), ('6599', '北泉'), ('6600', '石河子'), ('6601', '阿拉尔'),
    ('6602', '图木舒克'), ('6603', '五家渠'), ('6604', '北屯'), ('6605', '铁门关'), ('6606', '可克达拉'),
    ('6607', '双河'), ('6608', '昆玉'), ('6609', '胡杨河'), ('6610', '新星'), ('6611', '白杨'),
    ('6612', '铁力'), ('6613', '双丰'), ('6614', '可托海'), ('6615', '北泉')
]

# 主要一线和新一线城市（用于迁移目标优先级）
TIER1_CITIES = ['1100', '3100', '4401', '4403']  # 北京、上海、广州、深圳
TIER2_CITIES = ['1200', '3201', '3205', '3301', '3302', '3702', '4201', '4301', '5101', '5000']  # 天津、南京、苏州、杭州、宁波、青岛、武汉、长沙、成都、重庆

# 长尾分布控制阈值
MIN_TYPE_COUNT = 3  # 最小Type样本数阈值

# 人口基数配置
TOTAL_POPULATION_BASE = 1000_0000  # 总人口基数【增加到1000万】（可配置，单位：人）
# 说明：这是所有Type在所有城市的总人口基数
# 实际每个城市×Type的人口会根据城市规模和Type特征分配

# 城市规模权重（用于人口分配）
# 一线城市：1.0，新一线：0.5，其他：0.1-0.3（根据城市规模）
CITY_POPULATION_WEIGHTS = {
    # 一线城市
    '1100': 1.0,  # 北京
    '3100': 1.0,  # 上海
    '4401': 0.9,  # 广州
    '4403': 0.8,  # 深圳
    # 新一线城市
    '1200': 0.5,  # 天津
    '3201': 0.5,  # 南京
    '3205': 0.6,  # 苏州
    '3301': 0.5,  # 杭州
    '3302': 0.4,  # 宁波
    '3702': 0.4,  # 青岛
    '4201': 0.5,  # 武汉
    '4301': 0.4,  # 长沙
    '5101': 0.5,  # 成都
    '5000': 0.6,  # 重庆
}

# ============================================================================
# 迁移概率模型参数配置
# ============================================================================

# 年龄迁移基础概率（不同年龄段的迁移倾向）
AGE_MIGRATION_BASE = {
    '16-24': 0.35,  # 试错期：高迁移
    '25-34': 0.25,  # 成家期：中等迁移
    '35-49': 0.15,  # 稳固期：低迁移
    '50-60': 0.10,  # 回流期：很低迁移
    '60+': 0.05     # 养老期：极低迁移
}

# 学历迁移倾向乘数
EDU_MIGRATION_MULTIPLIER = {
    'EduLo': 0.8,   # 低学历：迁移倾向较低
    'EduMid': 1.0,  # 中等学历：基准
    'EduHi': 1.3    # 高学历：迁移倾向高（更多机会）
}

# 行业迁移倾向乘数
INDUSTRY_MIGRATION_MULTIPLIER = {
    'Mfg': 1.4,     # 蓝领制造：高迁移（随工地走）
    'Service': 1.2, # 传统服务：较高迁移（流动性强）
    'Wht': 0.9      # 现代专业服务：相对稳定
}

# 收入迁移倾向乘数
INCOME_MIGRATION_MULTIPLIER = {
    'IncL': 1.3,    # 低收入：高迁移（寻求机会）
    'IncML': 1.1,
    'IncM': 1.0,    # 中等收入：基准
    'IncMH': 0.9,
    'IncH': 0.7     # 高收入：低迁移（已稳定）
}

# 家庭状态迁移倾向乘数
FAMILY_MIGRATION_MULTIPLIER = {
    'Split': 1.2,   # 分离：高迁移
    'Unit': 0.8     # 团聚：低迁移（回流阻尼）
}

# 性别迁移倾向乘数
GENDER_MIGRATION_MULTIPLIER = {
    'M': 1.05,      # 男性：略高
    'F': 0.95       # 女性：略低
}

# 季节因子（不同月份对迁移意愿的影响）
SEASONAL_FACTORS = {
    1: 0.7,   # 1月：春节前，迁移意愿低
    2: 0.6,   # 2月：春节期间，迁移意愿最低
    3: 1.2,   # 3月：春季求职旺季，迁移意愿高
    4: 1.15,  # 4月：春季，迁移意愿高
    5: 1.1,   # 5月：春季末，迁移意愿较高
    6: 1.0,   # 6月：毕业季，迁移意愿正常
    7: 0.95,  # 7月：暑期，迁移意愿略低
    8: 0.9,   # 8月：暑期，迁移意愿略低
    9: 1.1,   # 9月：秋季，开学、换工作，迁移意愿较高
    10: 1.05, # 10月：秋季，迁移意愿较高
    11: 1.0,  # 11月：秋季末，迁移意愿正常
    12: 0.8   # 12月：准备过年，迁移意愿低
}

# 迁移概率范围限制
MIGRATION_PROB_MIN = 0.05  # 最小迁移概率
MIGRATION_PROB_MAX = 0.50  # 最大迁移概率

# 随机噪声参数
NOISE_NORMAL_RANGE = 0.05      # 正常噪声范围：±5%
NOISE_ANOMALY_RANGE = 0.15     # 异常噪声范围：±15%
NOISE_ANOMALY_PROB = 0.05      # 异常噪声出现概率：5%

# 城市吸引力噪声
CITY_ATTRACTIVENESS_NOISE = 0.08  # ±8%

# ============================================================================
# 城市吸引力模型参数
# ============================================================================

# 城市圈影响乘数
CLUSTER_MULTIPLIER = 1.3  # 同一城市群内的城市互相迁移概率提升30%

# 距离衰减参数（公里）
DISTANCE_FACTORS = {
    'very_close': (100, 1.3),    # <100km: ×1.3
    'close': (300, 1.2),         # <300km: ×1.2
    'medium': (500, 1.1),        # <500km: ×1.1
    'far': (1000, 1.0),          # <1000km: ×1.0
    'very_far': (float('inf'), 0.9)  # >=1000km: ×0.9
}

# GDP影响参数
GDP_MULTIPLIER_HIGH = 1.15   # 目标城市GDP > 源城市×1.5
GDP_MULTIPLIER_MEDIUM = 1.1  # 目标城市GDP > 源城市×1.2
GDP_MULTIPLIER_LOW = 0.95    # 目标城市GDP < 源城市×0.7

# 产业匹配度乘数
INDUSTRY_MATCH_MULTIPLIER = {
    'Mfg_to_Mfg': 1.3,        # 制造业人员 → 制造业城市
    'Mfg_to_Service': 0.9,     # 制造业人员 → 服务业城市
    'Mfg_to_Mixed': 1.1,       # 制造业人员 → 综合型城市
    'Service_to_Service': 1.2, # 服务业人员 → 服务业城市
    'Service_to_Mfg': 0.95,    # 服务业人员 → 制造业城市
    'Service_to_Mixed': 1.1,   # 服务业人员 → 综合型城市
    'Wht_to_Mixed': 1.2,       # 白领人员 → 综合型城市
    'Wht_to_Service': 1.15,    # 白领人员 → 服务业城市
    'Wht_to_Mfg': 1.0          # 白领人员 → 制造业城市
}

# Type特征对城市吸引力的调整
TYPE_CITY_ADJUSTMENT = {
    'EduHi_Tier1': 1.3,        # 高学历 + 一线城市
    'EduLo_Tier1': 0.8,        # 低学历 + 一线城市（落户难）
    'IncHigh_Tier1': 1.2,      # 高收入 + 一线城市
    'EduLo_Cluster': 1.2,      # 低学历 + 同城市群
    'IncLow_Cluster': 1.2,     # 低收入 + 同城市群
    'Unit_Cluster': 1.15       # 家庭团聚 + 同城市群（回流）
}

# ============================================================================
# 迁移目标分配参数
# ============================================================================

# Softmax温度参数（用于概率分布）
TEMPERATURE_BASE = 0.3         # 基础温度
TEMPERATURE_NOISE = 0.1        # 温度随机变化范围：±10%

# Top N城市概率分配
TOP_N_RATIO_BASE = 0.8         # Top N城市分配80%的迁移概率
TOP_N_RATIO_NOISE = 0.05       # 比例随机变化范围：±5%
TOP_N_RATIO_MIN = 0.7          # 最小比例
TOP_N_RATIO_MAX = 0.9          # 最大比例

# 迁移目标概率噪声
TARGET_PROB_NOISE = 0.1        # ±10%

# ============================================================================
# 人口分布参数
# ============================================================================

# 幂律分布参数
POWER_LAW_ALPHA = 2.2  # 从2.5降低到2，更符合人口特征分布（原2.5太极端）

# 城市人口噪声参数（三层噪声系统）
CITY_POP_NOISE_STABLE = 0.15   # 第一层：基于Type×城市的稳定噪声（±15%）
CITY_POP_NOISE_TIME = 0.05     # 第二层：基于时间的动态噪声（±5%）
CITY_POP_NOISE_EXTRA = 0.03    # 第三层：额外随机扰动（±3%）

# ============================================================================
# 输出配置
# ============================================================================

OUTPUT_YEARS = [2024]
OUTPUT_MONTHS = list(range(1, 13))  # 1-12月
TOP_N_CITIES = 20  # Top N迁移目标城市

# 输出文件路径配置
OUTPUT_DIR = 'output'  # 输出目录（相对于项目根目录）
OUTPUT_FILENAME = 'migration_data.csv'  # 输出文件名
