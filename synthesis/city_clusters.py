"""
城市圈/城市群定义：基于地理相邻和文化地缘
"""

# 中国主要城市群/城市圈定义
# 基于地理相邻、文化地缘、经济联系等因素

CITY_CLUSTERS = {
    # 京津冀城市群
    'JingJinJi': {
        'name': '京津冀',
        'cities': ['1100', '1200', '1301', '1302', '1303', '1306', '1307', '1308', '1309', '1310', '1311'],
        'description': '北京、天津及河北主要城市'
    },
    
    # 长三角城市群
    'YangtzeDelta': {
        'name': '长三角',
        'cities': ['3100', '3201', '3202', '3203', '3204', '3205', '3206', '3207', '3208', '3209', 
                   '3210', '3211', '3212', '3213', '3301', '3302', '3303', '3304', '3305', '3306', 
                   '3307', '3308', '3309', '3310', '3311', '3401', '3402', '3403', '3404', '3405', 
                   '3406', '3407', '3408', '3410', '3411', '3412', '3413', '3415', '3416', '3417', '3418'],
        'description': '上海、江苏、浙江、安徽主要城市'
    },
    
    # 珠三角城市群
    'PearlDelta': {
        'name': '珠三角',
        'cities': ['4401', '4402', '4403', '4404', '4405', '4406', '4407', '4408', '4409', '4412', 
                   '4413', '4414', '4415', '4416', '4417', '4418', '4419', '4420', '4451', '4452', '4453'],
        'description': '广东主要城市'
    },
    
    # 成渝城市群
    'ChengduChongqing': {
        'name': '成渝',
        'cities': ['5000', '5101', '5103', '5104', '5105', '5106', '5107', '5108', '5109', '5110', 
                   '5111', '5113', '5114', '5115', '5116', '5117', '5118', '5119', '5120'],
        'description': '重庆、四川主要城市'
    },
    
    # 中原城市群
    'CentralPlains': {
        'name': '中原',
        'cities': ['4101', '4102', '4103', '4104', '4105', '4106', '4107', '4108', '4109', '4110', 
                   '4111', '4112', '4113', '4114', '4115', '4116', '4117'],
        'description': '河南主要城市'
    },
    
    # 长江中游城市群
    'MiddleYangtze': {
        'name': '长江中游',
        'cities': ['4201', '4202', '4203', '4205', '4206', '4207', '4208', '4209', '4210', '4211', 
                   '4212', '4213', '4301', '4302', '4303', '4304', '4305', '4306', '4307', '4308', 
                   '4309', '4310', '4311', '4312', '4313', '3601', '3602', '3603', '3604', '3605', 
                   '3606', '3607', '3608', '3609', '3610', '3611'],
        'description': '湖北、湖南、江西主要城市'
    },
    
    # 山东半岛城市群
    'ShandongPeninsula': {
        'name': '山东半岛',
        'cities': ['3701', '3702', '3703', '3704', '3705', '3706', '3707', '3708', '3709', '3710', 
                   '3711', '3712', '3713', '3714', '3715', '3716'],
        'description': '山东主要城市'
    },
    
    # 辽中南城市群
    'LiaoningCentral': {
        'name': '辽中南',
        'cities': ['2101', '2102', '2103', '2104', '2105', '2106', '2107', '2108', '2109', '2110', 
                   '2111', '2112', '2113', '2114'],
        'description': '辽宁主要城市'
    },
    
    # 关中城市群
    'Guanzhong': {
        'name': '关中',
        'cities': ['6101', '6102', '6103', '6104', '6105', '6106', '6107', '6108', '6109', '6110'],
        'description': '陕西主要城市'
    },
    
    # 海峡西岸城市群
    'WestStrait': {
        'name': '海峡西岸',
        'cities': ['3501', '3502', '3503', '3504', '3505', '3506', '3507', '3508', '3509'],
        'description': '福建主要城市'
    },
    
    # 北部湾城市群
    'BeibuGulf': {
        'name': '北部湾',
        'cities': ['4501', '4502', '4503', '4504', '4505', '4506', '4507', '4508', '4509', '4510', 
                   '4511', '4512', '4513', '4514'],
        'description': '广西主要城市'
    },
    
    # 滇中城市群
    'CentralYunnan': {
        'name': '滇中',
        'cities': ['5301', '5303', '5304', '5305', '5306', '5307', '5308', '5309'],
        'description': '云南主要城市'
    },
    
    # 黔中城市群
    'CentralGuizhou': {
        'name': '黔中',
        'cities': ['5201', '5202', '5203', '5204', '5205', '5206'],
        'description': '贵州主要城市'
    },
    
    # 哈长城市群
    'HarbinChangchun': {
        'name': '哈长',
        'cities': ['2201', '2202', '2203', '2204', '2205', '2206', '2207', '2208', 
                   '2301', '2302', '2303', '2304', '2305', '2306', '2307', '2308', 
                   '2309', '2310', '2311', '2312'],
        'description': '黑龙江、吉林主要城市'
    },
    
    # 晋中城市群
    'CentralShanxi': {
        'name': '晋中',
        'cities': ['1401', '1402', '1403', '1404', '1405', '1406', '1407', '1408', '1409', '1410', '1411'],
        'description': '山西主要城市'
    },
    
    # 天山北坡城市群
    'TianshanNorth': {
        'name': '天山北坡',
        'cities': ['6501', '6502', '6504', '6505', '6523', '6527', '6528', '6529', '6530', '6531', 
                   '6532', '6540', '6542', '6543', '6544', '6545', '6546', '6547', '6548', '6549'],
        'description': '新疆主要城市'
    }
}

# 创建城市代码到城市群的映射
CITY_TO_CLUSTER = {}
for cluster_name, cluster_info in CITY_CLUSTERS.items():
    for city_code in cluster_info['cities']:
        if city_code not in CITY_TO_CLUSTER:
            CITY_TO_CLUSTER[city_code] = []
        CITY_TO_CLUSTER[city_code].append(cluster_name)

# 判断两个城市是否在同一城市群
def are_in_same_cluster(city_code1: str, city_code2: str) -> bool:
    """判断两个城市是否在同一城市群"""
    clusters1 = CITY_TO_CLUSTER.get(city_code1, [])
    clusters2 = CITY_TO_CLUSTER.get(city_code2, [])
    return bool(set(clusters1) & set(clusters2))

# 获取城市所在的城市群
def get_city_clusters(city_code: str) -> list:
    """获取城市所在的城市群列表"""
    return CITY_TO_CLUSTER.get(city_code, [])

# 获取同一城市群的其他城市
def get_cluster_cities(city_code: str) -> list:
    """获取与指定城市在同一城市群的其他城市代码列表"""
    clusters = CITY_TO_CLUSTER.get(city_code, [])
    cluster_cities = set()
    for cluster_name in clusters:
        cluster_cities.update(CITY_CLUSTERS[cluster_name]['cities'])
    cluster_cities.discard(city_code)  # 排除自己
    return list(cluster_cities)
